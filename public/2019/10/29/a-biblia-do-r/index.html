<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.54.0" />


<title>A B√≠blia do R - ŒºK - Website</title>
<meta property="og:title" content="A B√≠blia do R - ŒºK - Website">


  <link href='/logo.ico' rel='icon' type='image/x-icon'/>



  








<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="https://github.com/mranjos/">GitHub</a></li>
    
    <li><a href="https://www.linkedin.com/in/michelangelo-redondo-dos-anjos-2a817551/">LinkedIn</a></li>
    
    <li><a href="/about/">Sobre mim</a></li>
    
    <li><a href="/tg2_michelangelo.pdf">TCC</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">37 min read</span>
    

    <h1 class="article-title">A B√≠blia do R</h1>

    
    <span class="article-date">2019-10-29</span>
    

    <div class="article-content">
      
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#introdu√ß√£o">1. Introdu√ß√£o</a></li>
<li><a href="#fun√ß√µes-de-configura√ß√£o-e-ajuda.">2. Fun√ß√µes de configura√ß√£o e ajuda.</a>
<ul>
<li><a href="#alterando-o-formato-que-as-sa√≠das-s√£o-exibidas.">2.1. Alterando o formato que as sa√≠das s√£o exibidas.</a></li>
<li><a href="#fun√ß√µes-de-ajuda.">2.2. Fun√ß√µes de ajuda.</a></li>
</ul></li>
<li><a href="#atalhos-√∫teis">3. Atalhos √∫teis</a></li>
<li><a href="#comandos-base-√∫teis.">4. Comandos base √∫teis.</a></li>
<li><a href="#estrutura-e-cria√ß√£o-de-objetos.">5. Estrutura e cria√ß√£o de objetos.</a>
<ul>
<li><a href="#vetores">5.1. Vetores</a></li>
<li><a href="#matrizes">5.2. Matrizes</a></li>
<li><a href="#tipos-de-objetos">5.3. Tipos de objetos</a></li>
</ul></li>
<li><a href="#opera√ß√µes-matem√°ticas-b√°sicas">6. Opera√ß√µes matem√°ticas b√°sicas</a></li>
<li><a href="#exibindo-valores-e-textos-na-tela">7. Exibindo valores e textos na tela</a></li>
<li><a href="#data-frames">8. Data Frames</a>
<ul>
<li><a href="#criando-um-dataframe">8.1. Criando um Dataframe</a></li>
<li><a href="#acessando-elementos-de-um-dataframe">8.2. Acessando elementos de um dataframe</a></li>
<li><a href="#exibindo-dataframes">8.3. Exibindo dataframes</a></li>
<li><a href="#informa√ß√µes-de-um-dataframe">8.4. Informa√ß√µes de um dataframe</a></li>
<li><a href="#adicionando-colunas">8.5. Adicionando colunas</a></li>
<li><a href="#adicionando-linhas">8.6. Adicionando linhas</a></li>
<li><a href="#unindo-dataframes">8.7. Unindo dataframes</a></li>
<li><a href="#excluindofiltrandoselecionando-colunas">8.8. Excluindo/Filtrando/Selecionando colunas</a></li>
<li><a href="#excluindofiltrandoselecionando-linhas">8.9. Excluindo/Filtrando/Selecionando linhas</a></li>
<li><a href="#levels-das-vari√°veis-de-um-dataframe">8.10. Levels das vari√°veis de um dataframe</a></li>
</ul></li>
<li><a href="#listas">9. Listas</a>
<ul>
<li><a href="#criando-uma-lista">9.1. Criando uma lista</a></li>
<li><a href="#acessando-elementos-de-uma-lista">9.2. Acessando elementos de uma lista</a></li>
<li><a href="#unindo-itens-de-uma-lista">9.3. Unindo itens de uma lista</a></li>
<li><a href="#excluindo-itens-de-uma-lista">9.4. Excluindo itens de uma lista</a></li>
<li><a href="#inserindo-objetos-em-uma-lista">9.5. Inserindo objetos em uma lista</a></li>
</ul></li>
</ul>
</div>

<div id="introdu√ß√£o" class="section level2">
<h2>1. Introdu√ß√£o</h2>
<p><a name="abcd"> Esse </a> √© o primeiro post e o que eu considero o principal e mais importante, pois a ideia de cria√ß√£o do site surgiu por causa de um backup de c√≥digos que eu criei conforme as necessidades iam aparecendo e carregava ele comigo para todo lado para consultar quando precisava. Dessa forma, decidi organiz√°-lo melhor, upar na internet para facilitar o acesso e compartilhar com mais pessoas que tenham interesse e espero que possa ser √∫til para mais algu√©m como √© muito importante para mim (j√° que minha mem√≥ria n√£o √© das melhores üòÜ).</p>
<p>O post estar√° em constante atualiza√ß√£o, pois sempre surge algo novo para aprendermos e a ideia √© passar a linguagem R para frente sempre de maneira simples e did√°tica, talvez a organiza√ß√£o n√£o fique a das melhores, mas vou procurar me esfor√ßar ao m√°ximo, caso o sum√°rio n√£o fique muito claro, recomendo utilizar o <strong>‚ÄúCtrl F‚Äù</strong> que sempre me salvou e pode ajudar voc√™s tamb√©m.</p>
<p>Por √∫ltimo, antes de come√ßar realmente os c√≥digos, voc√™s encontraram meio misturado c√≥digos <strong>dplyr</strong> com o <strong>R raiz</strong>, mas ser√° em momentos na qual os c√≥digos possuem a mesma fun√ß√£o mas simplesmente podem ser escritos em estruturas diferentes. Acho muito importante saber as diversas maneiras de programar pois existem horas que uma ser√° mais f√°cil que a outra. Por exemplo, na minha opini√£o, o <strong>R raiz</strong> √© mais f√°cil para programar rotinas, loop, for, if, while, etc. J√° o <strong>dplyr</strong> √© mais f√°cil para acessar, consultar, agrupar, exibir resultados de uma tabela.</p>
<p><a href="#abcd">Volte ao topo</a></p>
<hr />
</div>
<div id="fun√ß√µes-de-configura√ß√£o-e-ajuda." class="section level2">
<h2>2. Fun√ß√µes de configura√ß√£o e ajuda.</h2>
<p>Antes de come√ßar de fato a entrar na linguagem R, vou deixar algumas fun√ß√µes de configura√ß√£o e ajuda no R que tamb√©m s√£o muito importantes e costumo utilizar bastante no dia a dia.</p>
<div id="alterando-o-formato-que-as-sa√≠das-s√£o-exibidas." class="section level3">
<h3>2.1. Alterando o formato que as sa√≠das s√£o exibidas.</h3>
<p><em>Parametros:</em></p>
<ul>
<li>scipen e digits.</li>
</ul>
<p>Esses dois par√¢metros s√£o os que mais utilizo nas configura√ß√µes do R, antes mesmo de come√ßar a programar.</p>
<ul>
<li>O primeiro <strong>scipen</strong> especifica qual sa√≠da queremos exibir para os n√∫meros, se a ci√™ntifica <span class="math inline">\(e^{10}\)</span> ou os n√∫meros completos.</li>
<li>O segundo <strong>digits</strong> especifica a quantidade de digitos que queremos exibir.</li>
</ul>
<p>OBS: O n√∫mero no par√¢metro n√£o importa para o <strong>scipen</strong>, apenas o sinal.</p>
<ul>
<li><p>scipen.</p></li>
<li><p>Negativo: Linguagem ci√™ntifica √© exibida.</p></li>
<li><p>Positivo: O n√∫mero √© exibido inteiro.</p></li>
<li><p>digits.</p></li>
<li><p>N√∫mero de digitos.</p></li>
</ul>
<pre class="r"><code>options(scipen = -9999, digits = 3)</code></pre>
<pre><code>## Sa√≠da exibida:  2.58e+00</code></pre>
<pre class="r"><code>options(scipen = 1111, digits = 6)</code></pre>
<pre><code>## Sa√≠da exibida:  2.57576</code></pre>
<ul>
<li>datatable.integer64.</li>
</ul>
<pre class="r"><code>options(datatable.integer64=&quot;numeric&quot;)</code></pre>
<p>Para que na leitura dos dados utilizando o pacote data.table, o R n√£o entenda valores num√©ricos como integer64 e sim como numeric.</p>
</div>
<div id="fun√ß√µes-de-ajuda." class="section level3">
<h3>2.2. Fun√ß√µes de ajuda.</h3>
<p>Quando queremos saber informa√ß√µes sobre determinada fun√ß√£o no R podemos utilizar o comando <strong>help</strong> ou a abrevia√ß√£o <strong>?</strong>.</p>
<pre class="r"><code>help(mean)
?mean</code></pre>
<p>Em algumas ocasi√µes n√£o lembramos o nome da fun√ß√£o inteira, apenas uma parte. Ao utilizar o comando <strong>apropos</strong> o <strong>R</strong> lista fun√ß√µes que tem a parte especificada no nome.</p>
<pre class="r"><code>apropos(&#39;mea&#39;)</code></pre>
<pre><code>##  [1] &quot;.colMeans&quot;          &quot;.rowMeans&quot;          &quot;colMeans&quot;          
##  [4] &quot;influence.measures&quot; &quot;kmeans&quot;             &quot;mean&quot;              
##  [7] &quot;mean.Date&quot;          &quot;mean.default&quot;       &quot;mean.difftime&quot;     
## [10] &quot;mean.POSIXct&quot;       &quot;mean.POSIXlt&quot;       &quot;rowMeans&quot;          
## [13] &quot;weighted.mean&quot;</code></pre>
<p>Por √∫ltimo e de muita utilidade, conseguimos verificar os s√≠mbolos operacionais matem√°ticos que o <strong>R</strong> utiliza apenas com o comando abaixo.</p>
<pre class="r"><code>help(&#39;*&#39;)</code></pre>
<pre><code>## Sa√≠da exibida no Help:
## + x
## - x
## x + y
## x - y
## x * y
## x / y
## x ^ y
## x %% y
## x %/% y</code></pre>
<p><a href="#abcd">Volte ao topo</a></p>
</div>
</div>
<div id="atalhos-√∫teis" class="section level2">
<h2>3. Atalhos √∫teis</h2>
<ul>
<li><p>Sele√ß√£o vertical.</p></li>
<li><p>Para realizar esse tipo de sele√ß√£o segure <strong>alt</strong> apertado e selecionando com o mouse, fazemos sele√ß√£o vertical e podemos alterar tudo de uma vez.</p></li>
<li><p>Al√©m disso combinamos algumas teclas para facilitar. Ao selecionar verticalmente com o <strong>alt</strong>, apertando <strong>shift + end</strong> o cursor vai para o fim de todas as linhas selecionadas, ou <strong>shift + home</strong> para o cursor ir para o in√≠cio da linha. Outra possibilidade √© utilizar as setas para o lado para selecionar, na maioria das vezes √© isso que eu utilizo <strong>shift + -&gt; ou &lt;- </strong>.</p></li>
<li><p>Substituindo palavras no R.</p></li>
<li><p>Apertando ctrl F assim como no excel, conseguimos substituir todas palavras de uma vez</p></li>
</ul>
<p><em>Parametros:</em></p>
<p>1 - <strong>In selection:</strong> substitui apenas no local selecionado</p>
<p>2 - <strong>Match case:</strong> diferencia maiuscula de minuscula</p>
<p>3 - <strong>Regex:</strong> entende o comando <strong>|</strong> como se fosse <strong>ou</strong>, ou seja operador l√≥gico.</p>
<ul>
<li>Refazendo uma a√ß√£o.</li>
<li>Muitos sabem que o <strong>ctrl + z</strong> desfaz uma a√ß√£o no R, mas em alguns casos acabamos desfazendo mais do que queriamos, para <strong>refazer</strong> algo desfeito existe o comando <strong>ctrl + shift + z</strong> que voc√™ pode alterar em <strong>Tools - Modify Keyboard Shortcuts</strong>, o mais utilizado em geral para refazer caso queira alterar √© o <strong>ctrl + i</strong>. Outros atalhos tamb√©m podem ser configurados nessa janela.</li>
</ul>
<p><a href="#abcd">Volte ao topo</a></p>
</div>
<div id="comandos-base-√∫teis." class="section level2">
<h2>4. Comandos base √∫teis.</h2>
<ul>
<li>Limpando a mem√≥ria do R.</li>
<li>Quando trabalhamos com <strong>loop</strong> ou um c√≥digo muito grande que vai gerando bases temporr√°rias pesadas, isso vai sobrecarregando a mem√≥ria do R, tempos alguns comandos que podem nos ajudar nisso, s√£o eles: <strong>objects</strong>, <strong>ls</strong> e <strong>rm</strong>, .</li>
</ul>
<p>O comando <strong>objects</strong> e <strong>ls</strong> lista os objetos criados at√© o momento no R.</p>
<pre class="r"><code>objects()
ls()</code></pre>
<p>J√° o comando <strong>rm</strong> limpa os objetos criados no R. √â poss√≠vel remover <em>TODOS</em> os objetos criados, combiando o comando <strong>rm</strong> com <strong>ls</strong> como vemos abaixo.</p>
<pre class="r"><code>rm(list = ls())</code></pre>
<p>Ou podemos excluir apenas alguns objetos de interesse, por exemplo.</p>
<pre class="r"><code>objeto1 = c()
objeto2 = c()
rm(objeto1, objeto2)</code></pre>
<ul>
<li>Verificando e alterando diret√≥rios.</li>
<li>Para verificiar o diret√≥rio que estamos trabalhando no R, onde ser√£o salvos os arquivos, as bases entre outras coisas, utilizamos o comando <strong>getwd</strong>.</li>
<li>Para alterar o caminho de um diret√≥rio para uma pasta de um projeto espec√≠fico por exemplo, utilizamos o <strong>setwd</strong>. Outro detalhe √© que para especificarmos um caminho no R n√£o utilizamos as barras padr√£o do windows <strong>C:\</strong> mas sim as barras duplas, como mostra o exemplo abaixo, ou at√© mesmo a barra invertida <strong>C:/</strong></li>
</ul>
<pre class="r"><code>getwd()
setwd(&quot;C:\\Users&quot;)</code></pre>
<ul>
<li>Salvando e carregando arquivos do tipo RData.</li>
<li>Os objetos no R podem ser salvos utilizando o comando <strong>save</strong> e carregados utilizando o comando <strong>load</strong>.</li>
<li><strong>save</strong> - O primeiro par√¢metro √© o nome do objeto a ser salvo (pode ser mais do que um) e o segundo o diret√≥rio que ele ser√° salvo (se n√£o especificar salvar√° no que j√° esta configurado) seguido do nome do objeto e sua exten√ß√£o do r <strong>RData</strong>.</li>
<li><strong>load</strong> - O par√¢metro necess√°rio √© o diret√≥rio que o objeto est√° salvo seguido do seu nome e sua exten√ß√£o <strong>RData</strong>.</li>
</ul>
<pre class="r"><code>objeto1 = c()
objeto2 = c()

save(objeto1,objeto2, file = &quot;C:\\Users\\objeto1.RData&quot;)
load(file = &quot;C:\\Users\\objeto1.RData&quot;)</code></pre>
<ul>
<li>Instalando, carregando e descarregando pacotes</li>
<li>Para instalar um pacote usamos o <strong>install.packages</strong></li>
<li>Para carregar um pacote usamos o <strong>library</strong>.</li>
<li>Para descarregar um pacote usamos o <strong>detach</strong> ele apenas descarrega o pacote caso o mesmo tenha sido carregado com o <strong>library</strong>.</li>
</ul>
<pre class="r"><code>install.packages(&quot;pacote&quot;)
library(pacote)
detach(package:pacote)</code></pre>
<p>N√£o precisamos necessariamente carregar um pacote, basta cham√°-lo pelo nome, seguido de <strong>::</strong> e em seguida a fun√ß√£o que desejamos utilizar dele, por exemplo:</p>
<pre class="r"><code>dplyr::select()</code></pre>
<ul>
<li>Verificando os pacotes instalados</li>
</ul>
<p>Pode n√£o parecer √∫til, mas em algum momento pode se tornar. O comando abaixo lista todos os pacotes instalados na vers√£o do R que voc√™ est√° utilizando.</p>
<pre class="r"><code>rownames(installed.packages())</code></pre>
<p>√â muito √∫til quando criamos fun√ß√µes na qual possui pacotes depententes, nesse caso, verificamos se o pacote est√° instalado, caso n√£o esteja, instalamos.</p>
<pre class="r"><code>if(&quot;pacote&quot; %in% rownames(installed.packages()) == FALSE){
  install.packages(&quot;pacote&quot;)
}</code></pre>
<p>Outra utilidade √© quando vamos atualizar o R ou mudar de computador e acabamos perdendo todos os pacotes. Antes de fazer essa altera√ß√£o de vers√£o ou de computador, podemos rodar o seguinte comando no computador/vers√£o antiga:</p>
<pre class="r"><code>packages = c(&quot;gdata&quot;,rownames(installed.packages()))
save(packages, file=&quot;C:/Temp/Rpackages&quot;)</code></pre>
<p>Na qual criamos a pasta <strong>temp</strong> anteriormente no nosso computador, salvamos todos os pacotes salvos no objeto <strong>packages</strong> e salvamos esse objeto em nossa pasta <strong>temp</strong>.</p>
<p>Ao trocar de computador/vers√£o, carregamos essa pasta com a gente e usamos o comando para instalar todos os pacotes que estavam instalados para n√≥s.</p>
<pre class="r"><code>load(file = &quot;C:/Temp/Rpackages&quot;)
for (p in setdiff(packages, rownames(installed.packages()))){
  install.packages(p)
}</code></pre>
<ul>
<li><a name="condicionais">Condicionais no R.</a></li>
<li><strong>=</strong> (recebe)</li>
<li><strong>==</strong> (igual)</li>
<li><strong>!=</strong> (diferente)</li>
<li><strong>&gt;</strong> (maior)</li>
<li><strong>&lt;</strong> (menor)</li>
<li><strong>&gt;=</strong> (maior igual)</li>
<li><strong>&lt;=</strong> (menor igual)</li>
<li><strong>%in%</strong> (contido)</li>
</ul>
</div>
<div id="estrutura-e-cria√ß√£o-de-objetos." class="section level2">
<h2>5. Estrutura e cria√ß√£o de objetos.</h2>
<p>Os objetos mais utilizados no R por mim pelo menos s√£o vetores, matrizes, data frames e listas, irei mostrar a estrutura de cada um deles e como acessar seus elementos. Para atribuir uma vari√°vel a um objeto utilizamos as teclas <strong>&lt;-</strong> ou <strong>=</strong> fica a sua escolha.</p>
<div id="vetores" class="section level3">
<h3>5.1. Vetores</h3>
<ul>
<li>Criando um vetor</li>
</ul>
<p>Para criar um vetor utilizamos a fun√ß√£o <strong>c()</strong>:</p>
<pre class="r"><code>vet_1 = c(7,2,5,9,7)
vet_2 = c(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;)
vet_3 = c(1,&quot;a&quot;,5)
vet_4 = c(17,12,15,19,17)</code></pre>
<ul>
<li>Acessando elementos de um vetor</li>
</ul>
<p>Para acessar os elementos de um vetor √© simples, basta utilizar o comando <strong>[]</strong> sendo que dentro dele especificamos qual o √≠ndice do vetor queremos acessar. Por exemplo, se queremos verificar qual o segundo elemento do vetor 1 <strong>vet_1</strong>, fazemos <strong>vet_1[2]</strong>.</p>
<p>Eu leio esse comando como se fosse <strong>onde</strong>, isso me ajuda muito na parte de filtragem e sele√ß√£o de dados que veremos mais para frente. Meu conselho ent√£o √© sempre que ver o s√≠mbolo <strong>[]</strong> ler <strong>onde</strong>. Por exemplo <strong>vet_1[2]</strong> leia <strong>vet_1 onde a posi√ß√£o √© 2</strong>.</p>
<pre class="r"><code>vet_1[2]</code></pre>
<pre><code>## Sa√≠da exibida:  2</code></pre>
<ul>
<li>Nomeando elementos de um vetor</li>
</ul>
<p>Em alguns casos √© √∫til nomear os elementos de um vetor, por exemplo</p>
<pre class="r"><code>names(vet_1) = c(&#39;um&#39;,&#39;dois&#39;, &#39;tres&#39;,&#39;quatro&#39;,&#39;cinco&#39;)</code></pre>
<pre><code>## Sa√≠da exibida:</code></pre>
<pre><code>##     um   dois   tres quatro  cinco 
##      7      2      5      9      7</code></pre>
<p>Dessa forma, podemos acessar os elementos dos vetores atrav√©s do seu nome e come√ßamos introduzir outro conceito que √© o de camadas, muito utilizados em listas que iremos ver mais para frente. Temos duas camadas agora ent√£o, o t√≠tulo com o conte√∫do de cada elemento na primeira camada e o somente o conte√∫do daquele elemento na segunda camada.</p>
<p>A primeira camada j√° vimos como acessar, que √© utilizando o comando <strong>[]</strong>, para a segunda camada, basta utilizarmos duas vezes esse comando <strong>[[]]</strong> pronto.</p>
<p>Acesso a primeira camada do primeiro elemento com o t√≠tulo e conte√∫do:</p>
<pre class="r"><code>vet_1[1]</code></pre>
<pre><code>## Sa√≠da exibida:</code></pre>
<pre><code>## um 
##  7</code></pre>
<p>Acesso a segunda camada do primeiro elemento com o conte√∫do:</p>
<pre class="r"><code>vet_1[[1]]</code></pre>
<pre><code>## Sa√≠da exibida:  7</code></pre>
<ul>
<li>Filtrando elementos de um vetor</li>
</ul>
<p>Para filtrar valores dentro de um vetor utilizamos as condicionais exemplificadas <a href="#condicionais">AQUI</a>, ou at√© mesmo para comparar e fazer verifica√ß√µes se um vetor √© igual ao outro.</p>
<ul>
<li>Retornando valores dentro do vetor que s√£o iguais a 7</li>
</ul>
<pre class="r"><code>vet_1[vet_1 == 7]</code></pre>
<pre><code>## Sa√≠da exibida:</code></pre>
<pre><code>##    um cinco 
##     7     7</code></pre>
<ul>
<li>Retornando valores dentro do vetor que s√£o menores do que 7</li>
</ul>
<pre class="r"><code>vet_1[vet_1 &lt; 7]</code></pre>
<pre><code>## Sa√≠da exibida:</code></pre>
<pre><code>## dois tres 
##    2    5</code></pre>
<p>Outra verifica√ß√£o que podemos fazer √© o tamanho do vetor, atrav√©s da fun√ß√£o <strong>length</strong>, ou seja, quantos elementos tem dentro daquele objeto vetor.</p>
<pre class="r"><code>length(vet_1)</code></pre>
<pre><code>## Sa√≠da exibida:  5</code></pre>
<p>Algumas fun√ß√µes facilitam bastante nossa vida na hora de criar vetores, por exemplo, <strong>vetores de repeti√ß√£o</strong>, <strong>aleat√≥rios</strong> e <strong>sequenciais</strong></p>
<ul>
<li>Excluindo itens de um vetor</li>
</ul>
<p>Temos basicamente duas formas de fazer isso.</p>
<p>A primeira √© colocando o sinal de menos antes da posi√ß√£o do item no vetor que queremos excluir, no exemplo abaixo o item na posi√ß√£o 2, equivalente ao valor 12.</p>
<pre class="r"><code>vet_4[-2]</code></pre>
<pre><code>## Sa√≠da exibida:  17 15 19 17</code></pre>
<p>A segunda √© filtando o elemento que n√£o queremos</p>
<pre class="r"><code>vet_4[vet_4 != &quot;12&quot;]</code></pre>
<pre><code>## Sa√≠da exibida:  17 15 19 17</code></pre>
<p>Ou se queremos excluir mais de um item usamos o condicional %in% com a exclama√ß√£o antes do vetor, indicando que queremos os itens do vetor que n√£o est√£o contidos naquele intervalo de valores</p>
<pre class="r"><code>vet_4[!vet_4 %in% c(12,17)]</code></pre>
<pre><code>## Sa√≠da exibida:  15 19</code></pre>
<ul>
<li>Vetores de repeti√ß√£o</li>
</ul>
<p>Repetindo a sequencia de 1 a 5 duas vezes</p>
<pre class="r"><code>rep(1:5, 2)</code></pre>
<pre><code>## Sa√≠da exibida:  1 2 3 4 5 1 2 3 4 5</code></pre>
<p>Repetindo os n√∫meros de 1 a 5 duas vezes</p>
<pre class="r"><code>rep(1:5, each=2)</code></pre>
<pre><code>## Sa√≠da exibida:  1 1 2 2 3 3 4 4 5 5</code></pre>
<ul>
<li>Gerando n√∫meros aleatorios de acordo com algumas distribui√ß√µes.</li>
</ul>
<p>10 n√∫meros aleat√≥rios normais com m√©dia 0 e desvio padr√£o 1.</p>
<pre class="r"><code>rnorm(10, mean = 0, sd = 1)</code></pre>
<pre><code>##  [1] -0.1459282 -0.4603394 -1.7908309 -0.5528748 -1.1889118 -0.7869200
##  [7] -0.0241061 -0.0288417  0.5473144  0.9793549</code></pre>
<p>10 n√∫meros aleat√≥rios com distribui√ß√£o poisson com n√∫mero esperado de ocorr√™ncias e vari√¢ncia iguais a 3.</p>
<pre class="r"><code>rpois(10,3) #poisson</code></pre>
<pre><code>##  [1] 2 1 5 3 7 5 3 2 4 5</code></pre>
<p>Para a binomial temos algumas situa√ß√µes, primeiros podemos querer realizar 400 jogos, onde cada jogo tem 10 lan√ßamentos de moeda, cuja probabilidade de sucesso √© 0.5. Nesse caso esperamos que em m√©dia, o n√∫mero de sucessos seja aproximadamente 5, como modemos ver abaixo:</p>
<pre class="r"><code>rbinom(400, 10, 0.5)</code></pre>
<pre class="r"><code>mean(rbinom(400, 10, 0.5))</code></pre>
<pre><code>## [1] 5.015</code></pre>
<p>Dessa forma se fizemos uma rodada de lan√ßamento de moedas, onde cada rodada tem 10 jogos e somamos o n√∫mero de sucessos com probabilidade 0.5 cada, tem o mesmo valor esperado do que somar 10 rodadas com 1 lan√ßamento cada, cuja resposta √© 0 para fracasso e 1 para sucesso e com probabilidade 0.5 de sucesso em cada lan√ßamento.</p>
<pre class="r"><code>rbinom(1, 10, 0.5)</code></pre>
<pre><code>## Sa√≠da exibida:  4</code></pre>
<pre class="r"><code>sum(rbinom(10, 1, 0.5))</code></pre>
<pre><code>## Sa√≠da exibida:  8</code></pre>
<p>Mais usual √© gerar n√∫meros aleat√≥rios com a mesma probabilidade de sucesso utilizando a distribui√ß√£o uniforme, nesse casos podemos gerar 10 n√∫meros na qual o m√≠nimo √© 1 e o m√°ximo √© 10.</p>
<pre class="r"><code>runif(10,min = 1, max = 10) #uniforme </code></pre>
<pre><code>##  [1] 5.68990 8.39520 4.68579 8.68578 8.27701 5.08838 8.51827 5.65140 1.17855
## [10] 3.55917</code></pre>
<pre><code>## Sa√≠da exibida:  8.61481 1.18603 4.70026 6.90436 5.05813 2.46561 7.68231 8.95363 2.23508 4.35896</code></pre>
<p>A mesma l√≥gica pode ser usada mas agora gerando apenas n√∫meros inteiros atrav√©s da fun√ß√£o sample, gerando 10 n√∫meros de -10 a 10.</p>
<pre class="r"><code>sample(-10:10, 10)</code></pre>
<pre><code>## Sa√≠da exibida:  7 9 8 0 10 -8 4 2 5 -1</code></pre>
<p>Al√©m disso, utilizando o par√¢metro <strong>replace</strong> podemos repetir n√∫meros</p>
<pre class="r"><code>sample(0:10, 10,replace = T)</code></pre>
<pre><code>## Sa√≠da exibida:  8 2 1 3 6 10 6 1 2 5</code></pre>
<p>Com esse comando podemos sortear nomes tamb√©m. Para isso, basta criarmos um vetor de nomes, fora ou dentro do comando, e especificar quantos nomes queremos que seja sorteados.</p>
<pre class="r"><code>sample(c(&quot;Jo√£o&quot;,&quot;Maria&quot;,&quot;Jos√©&quot;,&quot;Pedro&quot;,&quot;Julieta&quot;), 2)</code></pre>
<pre><code>## Sa√≠da exibida:  Jo√£o Pedro</code></pre>
<ul>
<li>Vetores sequenciais pulando de acordo com o intervalo desejado.</li>
</ul>
<p>Muito √∫til tamb√©m √© gerar valores sequencias pulando uma determinada quantia de valores, para isso, usamos a fun√ß√£o <strong>seq</strong>, onde queremos gerar valores de 1 a 10, pulando de 0.5 em 0.5 sequencialmente.</p>
<pre class="r"><code>seq(1,10,0.5)</code></pre>
<pre><code>## Sa√≠da exibida:  1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 6 6.5 7 7.5 8 8.5 9 9.5 10</code></pre>
<ul>
<li>Criando uma semente para os valores ale√°torios.</li>
</ul>
<p>Em muitas situa√ß√µes queremos replicar estudos de simula√ß√£o com valores aleat√≥rios, para isso, podemos criar uma semente, e dessa maneira os n√∫meros aleat√≥rios iram se repetir at√© mesmo em outro computador. O comando que faz isso √© o <strong>set.seed</strong>, onde o par√¢metro dentro da fun√ß√£o tem que ser o mesmo nas replica√ß√µes.</p>
<pre class="r"><code>set.seed(57)</code></pre>
<ul>
<li>Opera√ß√µes com vetores</li>
</ul>
<p>Podemos realizar opera√ß√µes com vetores, como somar, subtrair, multiplicar e dividir.</p>
<pre class="r"><code>vet_1 + vet_4
vet_1 - vet_4
vet_1 * vet_4
vet_1 / vet_4
4 * vet_1</code></pre>
</div>
<div id="matrizes" class="section level3">
<h3>5.2. Matrizes</h3>
<p>Matrizes seguem a mesma l√≥gica de vetores, por√©m, com mais dimens√µes, n√≥s trabalharemos sempre com matrizes de duas dimens√µes, para criar a matriz, elas tamb√©m s√£o Semelhante ao data.frame, exceto que cada elemento deve ser o mesmo tipo e mais comumente todos sendo n√∫meros. As fun√ß√µes que funcionam com data.frame tamb√©m devem funcionar com a matriz. Eu particularmente utilizo matrizes apenas em fun√ß√µes como for, while, para ir preenchendo, em geral utilizo mais data.frames</p>
<ul>
<li>Sintaxe para cria√ß√£o de matrizes</li>
</ul>
<p>Para criar matrizes √© simples e tem diversas maneiras. A primeira √© no primeiro par√¢metro adicionar o vetor de valores, o segundo par√¢metro o n√∫mero de linhas e o terceiro par√¢metro o n√∫mero de colunas.</p>
<pre class="r"><code>matrix1 = matrix(c(1,2,3,4,5,6,7,8,9),nrow = 3,ncol = 3)</code></pre>
<pre><code>## Sa√≠da exibida:</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<p>O segundo jeito √© especificar somente o vetor de valores e o segundo par√¢metro que √© o n√∫mero de linhas de cada coluna, dessa forma, os valores v√£o se alocando sozinhos na primeira coluna at√© o quinto elemento por exemplo e depois v√£o para a segunda.</p>
<pre class="r"><code>matrix2 &lt;- matrix(1:10, nrow = 5)</code></pre>
<pre><code>## Sa√≠da exibida:</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10</code></pre>
<p>Geralmente nos looping criamos inicialmente uma matriz de NA, para isso, basta deixarmos o primeiro par√¢metro vazio</p>
<pre class="r"><code>cat(&quot;Sa√≠da exibida:&quot;)</code></pre>
<pre><code>## Sa√≠da exibida:</code></pre>
<pre class="r"><code>matrix3</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]   NA   NA   NA
## [2,]   NA   NA   NA
## [3,]   NA   NA   NA</code></pre>
<p>Como vimos por pad√£o o R vai adicionando os elementos por linha, podemos alterar isso para colunas adicionando o par√¢metro <strong>byrow</strong></p>
<pre class="r"><code>matrix4 &lt;- matrix(1:10, nrow = 5, byrow = TRUE)</code></pre>
<pre><code>## Sa√≠da exibida:</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4
## [3,]    5    6
## [4,]    7    8
## [5,]    9   10</code></pre>
<ul>
<li>Multiplicando de matrizes</li>
</ul>
<p>Para multiplicar matrizes utilizamos o operador %*%.</p>
<pre class="r"><code>matrix1 %*% matrix1</code></pre>
<ul>
<li>Transpor matrizes</li>
</ul>
<p>Para transpor uma matriz basta usar a fun√ß√£o <strong>t()</strong></p>
<pre class="r"><code>t(matrix1)</code></pre>
<ul>
<li>Acessando elementos de uma matriz</li>
</ul>
<p>Para acessar elementos de uma matriz √© muito simples, assim como vetor, usamos operador <strong>[]</strong>, por√©m em uma matr√≠z temos linhas e colunas e para separar isso, vamos utilizar uma v√≠rgula, ficando o operador dessa forma <strong>[,]</strong>. Antes da v√≠rgula √© o acesso a linha e depois da v√≠rgula √© o acesso a coluna.</p>
<p>Dessa forma, para acessar a primeira linha de uma matriz utilizamos <strong>[1,]</strong>.</p>
<pre class="r"><code>matrix1[1,]</code></pre>
<pre><code>## Sa√≠da exibida:  1 4 7</code></pre>
<p>Para acessar a primeira coluna de uma matriz utilizamos <strong>[,1]</strong></p>
<pre class="r"><code>matrix1[,1]</code></pre>
<pre><code>## Sa√≠da exibida:  1 2 3</code></pre>
<p>Para acessar um elemento da matriz passamos as coordenadas, por exemplo, queremos o elemento que est√° na primeira linha da segunda coluna, fazemos ent√£o <strong>[1,2]</strong>.</p>
<pre class="r"><code>matrix1[1,2]</code></pre>
<pre><code>## Sa√≠da exibida:  4</code></pre>
<p>Esses conceitos de acesso s√£o muito importantes e voc√™ vai utilizar o tempo todo no R, para vetores, matrizes, data.frames e listas.</p>
<p><a href="#abcd">Volte ao topo</a></p>
</div>
<div id="tipos-de-objetos" class="section level3">
<h3>5.3. Tipos de objetos</h3>
<p>Ja vimos alguns tipos de objetos que o R possui, vetores e matrizes. Dentre os vetores podemos ter 3 tipos principais, <strong>numeric</strong>, <strong>character</strong> e <strong>factor</strong>. Temos as matrizes que basicamente s√£o conjuntos de vetores e alguns principais que veremos mais para frente que s√£o <strong>data.frames</strong> e <strong>lists</strong>. Mas como saber que tipo de objeto estamos trabalhando? Para isso o R possui uma fun√ß√£o chamada <strong>class</strong>. Observe:</p>
<ul>
<li>Vetor num√©rico</li>
</ul>
<pre class="r"><code>class(c(1,2,3,4,5))</code></pre>
<pre><code>## Sa√≠da exibida:  numeric</code></pre>
<p>Podemos arredondar valores num√©ricos utilizando algumas fun√ß√µes no R, as mais comuns s√£o:</p>
<ul>
<li><strong>round</strong> (Arrendondamento tradicional)</li>
</ul>
<p>Podemos especificar no segundo argumento o n√∫mero de casa decimais que queremos e onde ele ir√° arredondar.</p>
<pre class="r"><code>round(1.5757, 2)</code></pre>
<pre><code>## [1] 1.58</code></pre>
<ul>
<li><strong>trunc</strong> (Corta as casas decimais)</li>
</ul>
<pre class="r"><code>trunc(1.5757)</code></pre>
<pre><code>## [1] 1</code></pre>
<ul>
<li><strong>ceiling</strong> (Arredonda o valor pra cima)</li>
</ul>
<pre class="r"><code>ceiling(1.5757)</code></pre>
<pre><code>## [1] 2</code></pre>
<ul>
<li><strong>floor</strong> (Arredonda o valor pra baixo)</li>
</ul>
<pre class="r"><code>floor(1.5757)</code></pre>
<pre><code>## [1] 1</code></pre>
<ul>
<li>Vetor character</li>
</ul>
<p>Quando misturamos numeros com letras, o R entende como vetor de caracteres. Caso o vetor seja convertido para numeric, os caracteres assumir√£o valores nulos.</p>
<pre class="r"><code>class(c(&quot;a&quot;,&quot;b&quot;,&quot;1&quot;,&quot;3&quot;))</code></pre>
<pre><code>## Sa√≠da exibida:  character</code></pre>
<ul>
<li>Vetor factor</li>
</ul>
<p>√â um tipo de vetor para lidar com vari√°veis categ√≥ricas. Ele facilita a ordena√ß√£o de vetores de textos e s√£o muito utilizados em modelagens, cria√ß√£o de gr√°ficos, etc.</p>
<pre class="r"><code>class(factor(c(&quot;a&quot;,&quot;b&quot;,&quot;1&quot;,&quot;3&quot;)))</code></pre>
<pre><code>## Sa√≠da exibida:  factor</code></pre>
<p>Para sabemos quantos n√≠veis/levels tem um vetor de fator, usamos a fun√ß√£o <strong>nlevels</strong> que seria basicamente o mesmo do que contar os valores √∫nicos de um vetor de caracteres. Observe abaixo que temos 4 elementos no vetor mas apenas 3 n√≠veis.</p>
<pre class="r"><code>nlevels(factor(c(&quot;a&quot;,&quot;a&quot;,&quot;1&quot;,&quot;3&quot;)))</code></pre>
<pre><code>## [1] 3</code></pre>
<ul>
<li>Matrizes</li>
</ul>
<pre class="r"><code>class(matrix())</code></pre>
<pre><code>## Sa√≠da exibida:  matrix array</code></pre>
<ul>
<li>Data frames</li>
</ul>
<p>Data frames nada mais s√£o do que tabelas, com linhas e colunas. √© praticamente uma matriz com r√≥tulos de colunas. Tamb√©m s√£o conjunto de vetores, mas diferente de matrizes, cada coluna pode ser um tipo, por exemplo, a coluna 1 pode ser num√©rica, a coluna 2 pode ser character e a coluna 3 pode ser fator, na matriz ou s√£o numericos ou s√£o caracteres, n√£o temos essa mistura e convenhamos, essa mistura √© o que mais ocorre na vida real, pois temois informa√ß√µes como UF, Sexo, Idade, Peso, tudo junto em uma mesma tabela.</p>
<pre class="r"><code>class(data.frame())</code></pre>
<pre><code>## Sa√≠da exibida:  data.frame</code></pre>
<p>Por√©m, em um data.frame quando temos muitas colunas, fica praticamente invi√°vel ficar dando um <strong>class</strong> uma por uma, pensando nisso o R possui uma fun√ß√£o chamada <strong>str</strong> que nos mostra os tipos de de cada coluna.</p>
<pre class="r"><code>df_class = data.frame(col1 = c(7,2,7,56), col2 = c(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;))</code></pre>
<pre class="r"><code>str(df_class,list.len=ncol(df_class))</code></pre>
<pre><code>## &#39;data.frame&#39;:    4 obs. of  2 variables:
##  $ col1: num  7 2 7 56
##  $ col2: chr  &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;</code></pre>
<p>Por√©m essa n√£o √© uma forma muito apresentavel de se ver, podemos fazer uso de outras fun√ß√µes para verificarmos o tipo de cada coluna, caso queiramos filtrar e verificar quais s√£o num√©ricas, coisas do tipo.</p>
<pre class="r"><code>Class_DF = data.frame(Variavel = names(sapply(df_class, class)),
                      Classe  = sapply(df_class, class))

row.names(Class_DF) = NULL</code></pre>
<pre><code>##   Variavel    Classe
## 1     col1   numeric
## 2     col2 character</code></pre>
<ul>
<li>Listas</li>
</ul>
<p>A lista, √© um objeto que aceita diversos tipos de objetos dentro dela. Por exemplo, o primeio item de uma lista pode ser um vetor, o segundo pode ser um data.frame, o terceiro pode ser uma matriz e assim por diante.</p>
<pre class="r"><code>class(list())</code></pre>
<pre><code>## Sa√≠da exibida:  list</code></pre>
<p>Veremos listas e data.frames de forma mais detalhada em capitulos espec√≠ficos, pois s√£o os tipos de objetos mais trabalhados, pelo menos comigo.</p>
</div>
</div>
<div id="opera√ß√µes-matem√°ticas-b√°sicas" class="section level2">
<h2>6. Opera√ß√µes matem√°ticas b√°sicas</h2>
<p>Temos abaixo as mais fun√ß√µes matem√°ticas/estat√≠sticas b√°sicas mais utilizadas, tais como: <strong>log na base e</strong>, <strong>exponencial</strong>, <strong>m√°ximo</strong>, <strong>m√≠nimo</strong>, <strong>soma</strong>, <strong>m√©dia</strong>, <strong>mediana</strong>, <strong>vari√¢ncia</strong>, <strong>desvio padr√£o</strong> e <strong>correla√ß√£o</strong>, respectivamente:</p>
<pre class="r"><code>log(1)
exp(1)</code></pre>
<p>O m√°ximo e m√≠nimo pode ser calculado entre mais de um vetor</p>
<pre class="r"><code>max(vet_1)
max(vet_1,vet_4)

min(vet_1)
min(vet_1,vet_4)</code></pre>
<pre class="r"><code>sum(vet_1)
mean(vet_1)
median(vet_1)
var(vet_1)
sd(vet_1)</code></pre>
<p>Para a correla√ß√£o pode ser especificada qual metodologia para calcular, <strong>pearson</strong>, <strong>kendall</strong> ou <strong>spearman</strong>.</p>
<pre class="r"><code>cor(vet_1,vet_4, method = &quot;pearson&quot;)
cor(vet_1,vet_4, method = &quot;kendall&quot;)
cor(vet_1,vet_4, method = &quot;spearman&quot;)</code></pre>
<p><a href="#abcd">Volte ao topo</a></p>
<pre class="r"><code>class(vet_1)</code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<pre class="r"><code>class(vet_2)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="r"><code>class(vet_3)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="r"><code>class(vet_4)</code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>Transformando valores de um vetor em factor, numeros e caracteres</p>
<pre class="r"><code>as.factor(vet_1)
as.numeric(vet_2)
as.character(vet_3)</code></pre>
</div>
<div id="exibindo-valores-e-textos-na-tela" class="section level2">
<h2>7. Exibindo valores e textos na tela</h2>
<p>Temos algumas op√ß√µes, as que eu mais utilizo s√£o:</p>
<ul>
<li>CAT.</li>
</ul>
<pre class="r"><code>cat(&quot;Hello World \nLinha de baixo&quot;)</code></pre>
<pre><code>## Hello World 
## Linha de baixo</code></pre>
<p>OBS: O comando pula linha</p>
<ul>
<li>PRINT.</li>
</ul>
<pre class="r"><code>print(&quot;Hello World&quot;)</code></pre>
<pre><code>## [1] &quot;Hello World&quot;</code></pre>
<ul>
<li>WARNING.</li>
</ul>
<pre class="r"><code>warning(&quot;Hello World&quot;)</code></pre>
<pre><code>## Warning: Hello World</code></pre>
</div>
<div id="data-frames" class="section level2">
<h2>8. Data Frames</h2>
<div id="criando-um-dataframe" class="section level3">
<h3>8.1. Criando um Dataframe</h3>
<p>Dataframes nada mais s√£o do que um conjunto de vetores, basicamente √© uma matriz de duas dimens√µes, por√©m de f√°cil manipula√ß√£o. Para criar um dataframe, existe diversas maneiras, podemos criar a partir de vetores ja existentes:</p>
<pre class="r"><code>v1 = c(7,2,7,56)
v2 = c(4,5,6,7)

df1 = data.frame(col1 = v1, col2 = v2)</code></pre>
<pre><code>##   col1 col2
## 1    7    4
## 2    2    5
## 3    7    6
## 4   56    7</code></pre>
<p>Ou especificar no pr√≥prio dataframe os valores</p>
<pre class="r"><code>df2 = data.frame(col3 = c(7,2,7,56), 
                 col4 = c(1,2,3,4))</code></pre>
<pre><code>##   col3 col4
## 1    7    1
## 2    2    2
## 3    7    3
## 4   56    4</code></pre>
</div>
<div id="acessando-elementos-de-um-dataframe" class="section level3">
<h3>8.2. Acessando elementos de um dataframe</h3>
<p>A estrutura de um dataframe √© no formato de linha e coluna, e agora, aquele conceito de <strong>onde</strong> baseado em colchetes que foi apresentado anteriormente far√° muito sentido. Considere a estrutura <strong>[,]</strong> antes da v√≠rgula temos acesso a linhas de um dataframe e depois da linha temos acesso a colunas. Irei mostrar algumas formas distintas de acessar os elementos com o mesmo resultado</p>
<p>Vamos considerar o dataframe abaixo como exemplo</p>
<pre><code>##   col3 col4
## 1    7    1
## 2    2    2
## 3    7    3
## 4   56    4</code></pre>
<p>Vamos acessar a primeira coluna desse dataframe, podemos usar a esturutra de colchetes √∫nico, como usamos no vetor. Vale ressaltar que estamos acessando a <strong>COLUNA</strong> e n√£o o <strong>CONTE√öDO</strong> dessa coluna</p>
<pre class="r"><code>df2[1]</code></pre>
<pre><code>##   col3
## 1    7
## 2    2
## 3    7
## 4   56</code></pre>
<p>Se quisemos acessar o <strong>CONTE√öDO</strong> dessa coluna, podemos usar dois colchetes</p>
<pre class="r"><code>df2[[1]]</code></pre>
<pre><code>## [1]  7  2  7 56</code></pre>
<p>Ou o mais usual, usamos a estrutura de colchetes de linha e coluna, passando o par√¢metro <strong>AP√ìS</strong> a v√≠rgula, que significa que vamos acessar todos as linhas da coluna 1</p>
<pre class="r"><code>df2[,1]</code></pre>
<pre><code>## [1]  7  2  7 56</code></pre>
<p>Ou a estrutura de <strong>$</strong> chamando o nome da coluna</p>
<pre class="r"><code>df2$col3</code></pre>
<pre><code>## [1]  7  2  7 56</code></pre>
<p>Podemos tamb√©m acessar todas as colunas da linha 1, assim, basta fazermos o contr√°rio, colocarmos o par√¢metro <strong>ANTES</strong> da v√≠rgula</p>
<pre class="r"><code>df2[1,]</code></pre>
<pre><code>##   col3 col4
## 1    7    1</code></pre>
<p>E ai vamos usando as combina√ß√µes, podemos acessar a segunda linha da segunda coluna desse dataframe e assim por diante</p>
<pre class="r"><code>df2[2,2]</code></pre>
<pre><code>## [1] 2</code></pre>
<p>Isso √© muito importante ficar gravado para trabalhar com dataframes</p>
</div>
<div id="exibindo-dataframes" class="section level3">
<h3>8.3. Exibindo dataframes</h3>
<p>Temos algumas formas de visualizar os dataframes, para isso vamos usar como exemplo a tabela <strong>mtcars</strong> nativa do R.</p>
<p>Podemos visualizar a tabela usando o <strong>View</strong>, no R abrira uma aba exibindo o dataframe.</p>
<pre class="r"><code>View(mtcars)</code></pre>
<p>As vezes √© interessante ver apenas as primeiras linhas de um dataframe, nesse caso usamos a fun√ß√£o <strong>head</strong></p>
<pre class="r"><code>head(mtcars, n = 5)</code></pre>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2</code></pre>
<p>Ou queremos ver as √∫ltimas linhas de um dataframe, ent√£o usamos a fun√ß√£o <strong>tail</strong></p>
<pre class="r"><code>tail(mtcars, n = 3)</code></pre>
<pre><code>##                mpg cyl disp  hp drat   wt qsec vs am gear carb
## Ferrari Dino  19.7   6  145 175 3.62 2.77 15.5  0  1    5    6
## Maserati Bora 15.0   8  301 335 3.54 3.57 14.6  0  1    5    8
## Volvo 142E    21.4   4  121 109 4.11 2.78 18.6  1  1    4    2</code></pre>
</div>
<div id="informa√ß√µes-de-um-dataframe" class="section level3">
<h3>8.4. Informa√ß√µes de um dataframe</h3>
<ul>
<li>N√∫mero de linhas</li>
</ul>
<pre class="r"><code>nrow(mtcars)</code></pre>
<pre><code>## [1] 32</code></pre>
<ul>
<li>N√∫mero de colunas</li>
</ul>
<pre class="r"><code>ncol(mtcars)</code></pre>
<pre><code>## [1] 11</code></pre>
<ul>
<li>Dimens√£o</li>
</ul>
<pre class="r"><code>dim(mtcars)</code></pre>
<pre><code>## [1] 32 11</code></pre>
<ul>
<li>Tamanho de uma coluna espec√≠fica</li>
</ul>
<pre class="r"><code>length(mtcars[,2])</code></pre>
<pre><code>## [1] 32</code></pre>
<ul>
<li>Estat√≠sticas b√°sicas</li>
</ul>
<pre class="r"><code>summary(mtcars)</code></pre>
<pre><code>##       mpg            cyl            disp             hp             drat     
##  Min.   :10.4   Min.   :4.00   Min.   : 71.1   Min.   : 52.0   Min.   :2.76  
##  1st Qu.:15.4   1st Qu.:4.00   1st Qu.:120.8   1st Qu.: 96.5   1st Qu.:3.08  
##  Median :19.2   Median :6.00   Median :196.3   Median :123.0   Median :3.69  
##  Mean   :20.1   Mean   :6.19   Mean   :230.7   Mean   :146.7   Mean   :3.60  
##  3rd Qu.:22.8   3rd Qu.:8.00   3rd Qu.:326.0   3rd Qu.:180.0   3rd Qu.:3.92  
##  Max.   :33.9   Max.   :8.00   Max.   :472.0   Max.   :335.0   Max.   :4.93  
##        wt            qsec            vs              am             gear     
##  Min.   :1.51   Min.   :14.5   Min.   :0.000   Min.   :0.000   Min.   :3.00  
##  1st Qu.:2.58   1st Qu.:16.9   1st Qu.:0.000   1st Qu.:0.000   1st Qu.:3.00  
##  Median :3.33   Median :17.7   Median :0.000   Median :0.000   Median :4.00  
##  Mean   :3.22   Mean   :17.8   Mean   :0.438   Mean   :0.406   Mean   :3.69  
##  3rd Qu.:3.61   3rd Qu.:18.9   3rd Qu.:1.000   3rd Qu.:1.000   3rd Qu.:4.00  
##  Max.   :5.42   Max.   :22.9   Max.   :1.000   Max.   :1.000   Max.   :5.00  
##       carb     
##  Min.   :1.00  
##  1st Qu.:2.00  
##  Median :2.00  
##  Mean   :2.81  
##  3rd Qu.:4.00  
##  Max.   :8.00</code></pre>
<ul>
<li>Tipo de vari√°veis de um dataframe</li>
</ul>
<p>J√° vimos anteriormente alguns m√©todos. Para verificar os tipos de vari√°veis de um dataframe, podememos usar a function <strong>str</strong>, por√©m se o banco de dados √© muito grande, ela ser√° truncada, para visualizar o banco todo, usamos o par√¢mentro <strong>list.len</strong></p>
<pre class="r"><code>str(iris,list.len=ncol(iris))</code></pre>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>Caso queira apenas os tipos das variaveis mesmo, podemos usar a seguinte l√≥gica</p>
<pre class="r"><code>data.frame(Class = sapply(iris, class))</code></pre>
<pre><code>##                Class
## Sepal.Length numeric
## Sepal.Width  numeric
## Petal.Length numeric
## Petal.Width  numeric
## Species       factor</code></pre>
<ul>
<li>Nome das colunas</li>
</ul>
<pre class="r"><code>colnames(iris)</code></pre>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<p>Podemos usar isso para alterar o nome de uma coluna especifica</p>
<pre class="r"><code>colnames(iris)[2] = &quot;novo_nome&quot;
colnames(iris)</code></pre>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;novo_nome&quot;    &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<p>Ou de todas as colunas</p>
<pre class="r"><code>colnames(iris) = c(&quot;col1&quot;,&quot;col2&quot;,&quot;col3&quot;,&quot;col4&quot;,&quot;col5&quot;)
colnames(iris)</code></pre>
<pre><code>## [1] &quot;col1&quot; &quot;col2&quot; &quot;col3&quot; &quot;col4&quot; &quot;col5&quot;</code></pre>
<ul>
<li>Nome das linhas</li>
</ul>
<pre class="r"><code>rownames(head(iris))</code></pre>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot;</code></pre>
<p>Tamb√©m podemos alterar o nome das linhas usando a mesma l√≥gica</p>
<pre class="r"><code>rownames(iris)[1] = &quot;linha_1&quot;
rownames(head(iris))</code></pre>
<pre><code>## [1] &quot;linha_1&quot; &quot;2&quot;       &quot;3&quot;       &quot;4&quot;       &quot;5&quot;       &quot;6&quot;</code></pre>
</div>
<div id="adicionando-colunas" class="section level3">
<h3>8.5. Adicionando colunas</h3>
<p>Para adicionar colunas podemos usar a estrutura de <strong>$</strong> na qual ja passamos o nome da nova coluna, nesse caso <strong>col5</strong></p>
<pre class="r"><code>df2$col5 = c(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;)</code></pre>
<pre><code>##   col3 col4 col5
## 1    7    1    a
## 2    2    2    b
## 3    7    3    c
## 4   56    4    d</code></pre>
<p>Ou usarmos a estrutura de colchetes √∫nico, que j√° vimos que representa <strong>COLUNA</strong> e passamos o <strong>CONTE√öDO</strong> dessa coluna, nesse caso como n√£o damos um nome, por padr√£o ser√° <strong>V</strong> acompanhado do n√∫mero da coluna</p>
<pre class="r"><code>df2[4] = c(3,2,1,2)</code></pre>
<pre><code>##   col3 col4 col5 V4
## 1    7    1    a  3
## 2    2    2    b  2
## 3    7    3    c  1
## 4   56    4    d  2</code></pre>
<p>Podemos transformar o nome das linhas do nosso dataframe em uma coluna do mesmo</p>
<pre class="r"><code>head(cbind(linhas = rownames(iris), iris))</code></pre>
<pre><code>##          linhas col1 col2 col3 col4   col5
## linha_1 linha_1  5.1  3.5  1.4  0.2 setosa
## 2             2  4.9  3.0  1.4  0.2 setosa
## 3             3  4.7  3.2  1.3  0.2 setosa
## 4             4  4.6  3.1  1.5  0.2 setosa
## 5             5  5.0  3.6  1.4  0.2 setosa
## 6             6  5.4  3.9  1.7  0.4 setosa</code></pre>
<p>O contr√°rio tamb√©m √© valido, podemos transformar uma coluna especifica em nosso rownames, desde que n√£o seja duplicada</p>
<pre class="r"><code>rownames(dataframe) = dataframe[,5]</code></pre>
</div>
<div id="adicionando-linhas" class="section level3">
<h3>8.6. Adicionando linhas</h3>
<p>Seguindo a mesma l√≥gica das colunas, podemos adicionar linhas, mas indicando o par√¢metro ap√≥s a v√≠rgula referente a posi√ß√£o da linha que deseja inserir e atribuindo o conte√∫do a ela</p>
<pre class="r"><code>df2[5,] = c(1,2,&quot;e&quot;,5)</code></pre>
<pre><code>##   col3 col4 col5 V4
## 1    7    1    a  3
## 2    2    2    b  2
## 3    7    3    c  1
## 4   56    4    d  2
## 5    1    2    e  5</code></pre>
</div>
<div id="unindo-dataframes" class="section level3">
<h3>8.7. Unindo dataframes</h3>
<p>Podemos tamb√©m juntar dois dataframes, tanto em linhas quanto em colunas, para colunas usamos a fun√ßao cbind</p>
<pre class="r"><code>cbind(df1,df2[-5,])</code></pre>
<pre><code>##   col1 col2 col3 col4 col5 V4
## 1    7    4    7    1    a  3
## 2    2    5    2    2    b  2
## 3    7    6    7    3    c  1
## 4   56    7   56    4    d  2</code></pre>
<p>Para colunas usamos a fun√ß√£o rbind, caso as colunas tenham o mesmo nome</p>
<pre class="r"><code>union_df1 = data.frame(col3 = c(7,2,7,56), 
                       col4 = c(1,2,3,4))
union_df2 = data.frame(col3 = c(7,2,7,56), 
                       col4 = c(1,2,3,4))
rbind(union_df1,union_df2)</code></pre>
<pre><code>##   col3 col4
## 1    7    1
## 2    2    2
## 3    7    3
## 4   56    4
## 5    7    1
## 6    2    2
## 7    7    3
## 8   56    4</code></pre>
<p>Caso as colunas tenham nomes distintos podemos usar a fun√ß√£o bind_rows do pacote dplyr, ela preenche com NA os valores que n√£o tem no outro dataframe</p>
<pre class="r"><code>dplyr::bind_rows(df1,df2)</code></pre>
<pre><code>##   col1 col2 col3 col4 col5   V4
## 1    7    4 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;
## 2    2    5 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;
## 3    7    6 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;
## 4   56    7 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;
## 5   NA   NA    7    1    a    3
## 6   NA   NA    2    2    b    2
## 7   NA   NA    7    3    c    1
## 8   NA   NA   56    4    d    2
## 9   NA   NA    1    2    e    5</code></pre>
</div>
<div id="excluindofiltrandoselecionando-colunas" class="section level3">
<h3>8.8. Excluindo/Filtrando/Selecionando colunas</h3>
<p>Temos diversas formas de fazer isso, vamos criar um dataframe com o que foi aprendido at√© agora para usarmos como base para os exempos</p>
<pre class="r"><code>del_fil_sel_col = data.frame(Coluna1 = seq(1,100,1),
                             Coluna2 = sample(500,100),
                             Coluna3 = rnorm(100),
                             Coluna4 = rpois(100,3),
                             Coluna5 = runif(100),
                             Coluna6 = rep(1:5, 20))</code></pre>
<p>Vamos ver as primeiras linhas desse dataframe gerado</p>
<pre class="r"><code>head(del_fil_sel_col)</code></pre>
<pre><code>##   Coluna1 Coluna2   Coluna3 Coluna4  Coluna5 Coluna6
## 1       1     114 -0.828217       1 0.544132       1
## 2       2     337  0.326118       5 0.374374       2
## 3       3     484  0.656769       2 0.845580       3
## 4       4     139  1.341015       1 0.895469       4
## 5       5     436 -1.910155       3 0.898643       5
## 6       6     430 -0.708027       2 0.554179       1</code></pre>
<p>A primeira forma que vamos ver aqui √© a mais simples, basta atribuirmos o valor <strong>NULL</strong> para a coluna e ela ser√° excluida do dataframe, simples, objetivo, √∫til e pr√°tico.</p>
<pre class="r"><code>del_fil_sel_col$Coluna6 = NULL</code></pre>
<p>Observe que a Coluna6 n√£o est√° mais no dataframe, essa forma √© um caminho sem volta, pois uma vez atribuido o valor <strong>NULL</strong> para a coluna, ela j√° est√° deletada</p>
<pre><code>##   Coluna1 Coluna2   Coluna3 Coluna4  Coluna5
## 1       1     114 -0.828217       1 0.544132
## 2       2     337  0.326118       5 0.374374
## 3       3     484  0.656769       2 0.845580
## 4       4     139  1.341015       1 0.895469
## 5       5     436 -1.910155       3 0.898643
## 6       6     430 -0.708027       2 0.554179</code></pre>
<p>As demais formas, para que a coluna seja realmente exclu√≠da, √© necess√°rio salv√°-la em cima do mesmo dataframe ou em um novo como preferir</p>
<p>A pr√≥xima forma √© utilizar a sintaxe de colchetes linhas e colunas, para excluir a coluna desejada basta adicionar o sinal de menos antes da posi√ß√£o da coluna</p>
<pre class="r"><code>del_fil_sel_col[,-5]</code></pre>
<pre><code>##   Coluna1 Coluna2   Coluna3 Coluna4
## 1       1     114 -0.828217       1
## 2       2     337  0.326118       5
## 3       3     484  0.656769       2
## 4       4     139  1.341015       1
## 5       5     436 -1.910155       3
## 6       6     430 -0.708027       2</code></pre>
<p>Uma outra forma √© usar a fun√ß√£o <strong>subset</strong> selecionando ou apenas as colunas que deseja ficar, ou adicionando o sinal de menos antes do vetor, as que deseja excluir. Nessa forma voc√™ pode passar tanto o nome da coluna como a sua posi√ß√£o, o resultado √© o mesmo</p>
<p>No caso abaixo, queremos excluir a primeira e a segunda coluna, passando o nome delas</p>
<pre class="r"><code>subset(del_fil_sel_col, select = -c(Coluna1,Coluna2))</code></pre>
<pre><code>##     Coluna3 Coluna4  Coluna5
## 1 -0.828217       1 0.544132
## 2  0.326118       5 0.374374
## 3  0.656769       2 0.845580
## 4  1.341015       1 0.895469
## 5 -1.910155       3 0.898643
## 6 -0.708027       2 0.554179</code></pre>
<p>Agora podemos passar a posi√ß√£o delas</p>
<pre class="r"><code>subset(del_fil_sel_col, select = -c(1,2))</code></pre>
<pre class="r"><code>head(subset(del_fil_sel_col, select = -c(1,2)))</code></pre>
<pre><code>##     Coluna3 Coluna4  Coluna5
## 1 -0.828217       1 0.544132
## 2  0.326118       5 0.374374
## 3  0.656769       2 0.845580
## 4  1.341015       1 0.895469
## 5 -1.910155       3 0.898643
## 6 -0.708027       2 0.554179</code></pre>
<p>Podemos selecionar as colunas que queremos manter, basta retirarmos o sinal de menos antes do vetor.</p>
<p>Nos exemplos abaixo, queremos manter a Coluna1 e Coluna2, primeiro passando o nome das colunas</p>
<pre class="r"><code>subset(del_fil_sel_col, select = c(Coluna1,Coluna2))</code></pre>
<pre class="r"><code>head(subset(del_fil_sel_col, select = c(Coluna1,Coluna2)))</code></pre>
<pre><code>##   Coluna1 Coluna2
## 1       1     114
## 2       2     337
## 3       3     484
## 4       4     139
## 5       5     436
## 6       6     430</code></pre>
<p>Ou novamente passando a posi√ß√£o</p>
<pre class="r"><code>subset(del_fil_sel_col, select = c(1,2))</code></pre>
<pre class="r"><code>head(subset(del_fil_sel_col, select = c(1,2)))</code></pre>
<pre><code>##   Coluna1 Coluna2
## 1       1     114
## 2       2     337
## 3       3     484
## 4       4     139
## 5       5     436
## 6       6     430</code></pre>
<p>Isso tamb√©m pode ser feito utilizando o pacote <strong>dplyr</strong> passando a posi√ß√£o</p>
<pre class="r"><code>library(dplyr)

head(del_fil_sel_col %&gt;% select(1,2))</code></pre>
<pre><code>##   Coluna1 Coluna2
## 1       1     114
## 2       2     337
## 3       3     484
## 4       4     139
## 5       5     436
## 6       6     430</code></pre>
<p>Ou passando o nome das colunas</p>
<pre class="r"><code>library(dplyr)

head(del_fil_sel_col %&gt;% select(Coluna1,Coluna2))</code></pre>
<pre><code>##   Coluna1 Coluna2
## 1       1     114
## 2       2     337
## 3       3     484
## 4       4     139
## 5       5     436
## 6       6     430</code></pre>
<ul>
<li>Selecionando colunas de acordo com o tipo da vari√°vel</li>
</ul>
<p>Podemos fazer isso com o aux√≠lo do pacote <strong>dplyr</strong>
Como base vamos utilizar o dataframe iris como exemplo, note que temos 4 colunas num√©ricas e uma factor</p>
<pre><code>##         col1 col2 col3 col4   col5
## linha_1  5.1  3.5  1.4  0.2 setosa
## 2        4.9  3.0  1.4  0.2 setosa
## 3        4.7  3.2  1.3  0.2 setosa
## 4        4.6  3.1  1.5  0.2 setosa
## 5        5.0  3.6  1.4  0.2 setosa
## 6        5.4  3.9  1.7  0.4 setosa</code></pre>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ col1: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ col2: num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ col3: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ col4: num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ col5: Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<ul>
<li>Selecionando colunas que s√£o num√©ricas apenas</li>
</ul>
<p>Note que a coluna Species n√£o aparece, pois ela n√£o √© numerica e estamos selecionando apenas as que s√£o num√©ricas</p>
<pre class="r"><code>library(dplyr)

head(iris) %&gt;% 
  select_if(is.numeric)</code></pre>
<pre><code>##         col1 col2 col3 col4
## linha_1  5.1  3.5  1.4  0.2
## 2        4.9  3.0  1.4  0.2
## 3        4.7  3.2  1.3  0.2
## 4        4.6  3.1  1.5  0.2
## 5        5.0  3.6  1.4  0.2
## 6        5.4  3.9  1.7  0.4</code></pre>
<p>Caso n√£o queira usar nenhum pacote, tamb√©m conseguimos fazer a opera√ß√£o usando o R Raiz</p>
<pre class="r"><code>Filter(is.numeric,head(iris))</code></pre>
<pre><code>##         col1 col2 col3 col4
## linha_1  5.1  3.5  1.4  0.2
## 2        4.9  3.0  1.4  0.2
## 3        4.7  3.2  1.3  0.2
## 4        4.6  3.1  1.5  0.2
## 5        5.0  3.6  1.4  0.2
## 6        5.4  3.9  1.7  0.4</code></pre>
<p>Se ainda n√£o fucou satisfeito, podemos usar o R Raiz com a function sapply</p>
<pre class="r"><code>head(iris[,sapply(iris, is.numeric)])</code></pre>
<pre><code>##         col1 col2 col3 col4
## linha_1  5.1  3.5  1.4  0.2
## 2        4.9  3.0  1.4  0.2
## 3        4.7  3.2  1.3  0.2
## 4        4.6  3.1  1.5  0.2
## 5        5.0  3.6  1.4  0.2
## 6        5.4  3.9  1.7  0.4</code></pre>
<p>Podemos chegar no mesmo objetivo mas ao inv√©s de selecionar as num√©ricas, podemos selecionar as que N√ÉO s√£o factor, acrescentando a function <strong>negate</strong> do pacote <strong>purrr</strong></p>
<pre class="r"><code>library(dplyr)
library(purrr)

head(iris) %&gt;% 
  select_if(negate(is.factor))</code></pre>
<pre><code>##         col1 col2 col3 col4
## linha_1  5.1  3.5  1.4  0.2
## 2        4.9  3.0  1.4  0.2
## 3        4.7  3.2  1.3  0.2
## 4        4.6  3.1  1.5  0.2
## 5        5.0  3.6  1.4  0.2
## 6        5.4  3.9  1.7  0.4</code></pre>
<ul>
<li>Selecionando colunas com mais de um tipo</li>
</ul>
<p>Nesse caso precisamos criar uma function dentro do select_if</p>
<pre class="r"><code>library(dplyr)

head(iris) %&gt;% 
  select_if(function(col) is.numeric(col) |
              is.factor(col))</code></pre>
<pre><code>##         col1 col2 col3 col4   col5
## linha_1  5.1  3.5  1.4  0.2 setosa
## 2        4.9  3.0  1.4  0.2 setosa
## 3        4.7  3.2  1.3  0.2 setosa
## 4        4.6  3.1  1.5  0.2 setosa
## 5        5.0  3.6  1.4  0.2 setosa
## 6        5.4  3.9  1.7  0.4 setosa</code></pre>
<p>Ou novamente sem utilizar nenhum pacote</p>
<pre class="r"><code>Filter(function(col) is.numeric(col) |
         is.factor(col),head(iris))</code></pre>
<pre><code>##         col1 col2 col3 col4   col5
## linha_1  5.1  3.5  1.4  0.2 setosa
## 2        4.9  3.0  1.4  0.2 setosa
## 3        4.7  3.2  1.3  0.2 setosa
## 4        4.6  3.1  1.5  0.2 setosa
## 5        5.0  3.6  1.4  0.2 setosa
## 6        5.4  3.9  1.7  0.4 setosa</code></pre>
<p>E utilizando a function sapply</p>
<pre class="r"><code>head(iris[,sapply(iris, function(col) is.numeric(col) |
                    is.factor(col))])</code></pre>
<pre><code>##         col1 col2 col3 col4   col5
## linha_1  5.1  3.5  1.4  0.2 setosa
## 2        4.9  3.0  1.4  0.2 setosa
## 3        4.7  3.2  1.3  0.2 setosa
## 4        4.6  3.1  1.5  0.2 setosa
## 5        5.0  3.6  1.4  0.2 setosa
## 6        5.4  3.9  1.7  0.4 setosa</code></pre>
<p>Cabe a voc√™ escolher o jeito que quer usar e a forma mais eficiente para o seu caso!</p>
</div>
<div id="excluindofiltrandoselecionando-linhas" class="section level3">
<h3>8.9. Excluindo/Filtrando/Selecionando linhas</h3>
</div>
<div id="levels-das-vari√°veis-de-um-dataframe" class="section level3">
<h3>8.10. Levels das vari√°veis de um dataframe</h3>
<p>Novamente podemos utilizar a function <strong>sapply</strong> para esse objetivo, junto com a function <strong>nlevels</strong></p>
<pre class="r"><code>data.frame(Level = sapply(iris, nlevels))</code></pre>
<pre><code>##      Level
## col1     0
## col2     0
## col3     0
## col4     0
## col5     3</code></pre>
<p>Com isso podemos ir mais al√©m, por exemplo, pegar os nomes das vari√°veis que tem mais de um level no factor</p>
<pre class="r"><code>colnames(iris)[sapply(iris, nlevels) &gt; 1]</code></pre>
<pre><code>## [1] &quot;col5&quot;</code></pre>
<p><a href="#abcd">Volte ao topo</a></p>
</div>
</div>
<div id="listas" class="section level2">
<h2>9. Listas</h2>
<p>Como j√° falado anteriormente, uma lista √© um objeto que aceita diversos tipos de objetos dentro dela. Por exemplo, o primeio item de uma lista pode ser um vetor, o segundo pode ser um data.frame, o terceiro pode ser uma matriz e assim por diante.</p>
<div id="criando-uma-lista" class="section level3">
<h3>9.1. Criando uma lista</h3>
<p>Podemos criar uma lista j√° preenchendo os elementos, nesse caso o primeiro item √© uma matriz e o segundo √© um vetor</p>
<pre class="r"><code>list(matriz = matrix(1:10, nrow = 5), 
     vetor = c(1,2,3,4,5))</code></pre>
<pre><code>## $matriz
##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10
## 
## $vetor
## [1] 1 2 3 4 5</code></pre>
<p>Podemos criar uma lista vazia e ir preenchendo ela aos poucos</p>
<pre class="r"><code>empty_list = list()
empty_list[[1]] = matrix(1:10, nrow = 5)
empty_list[[2]] = c(1,2,3,4,5)</code></pre>
<p>Em seguida podemos nomear os itens dessa lista usando a fun√ß√£o names, atrav√©s de um vetor passamos os nomes que esses elementos v√£o ter.</p>
<pre class="r"><code>names(empty_list) = c(&#39;matriz&#39;,&#39;vetor&#39;)</code></pre>
<pre><code>## $matriz
##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10
## 
## $vetor
## [1] 1 2 3 4 5</code></pre>
</div>
<div id="acessando-elementos-de-uma-lista" class="section level3">
<h3>9.2. Acessando elementos de uma lista</h3>
<p>O primeiro colchete, √© referente ao t√≠tulo da lista, o segundo colchete √© referente ao conte√∫do dela, por exemplo, acessando o primeiro elemento da lista, vemos que o nome √© matriz.</p>
<pre class="r"><code>empty_list[1]</code></pre>
<pre><code>## $matriz
##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10</code></pre>
<p>Acessando o conte√∫do dessa lista, usando a nota√ß√£o de colchete, agora estamos acessando a matriz em si</p>
<pre class="r"><code>empty_list[[1]]</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10</code></pre>
<p>Podemos acessar tamb√©m utilizando o nome, se estiver nome o conte√∫do da lista</p>
<pre class="r"><code>empty_list$matriz</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10</code></pre>
</div>
<div id="unindo-itens-de-uma-lista" class="section level3">
<h3>9.3. Unindo itens de uma lista</h3>
<p>√â util as vezes unirmos os itens de uma lista, para isso vamos criar uma nova</p>
<pre class="r"><code>list_union = list(c(1,2,3,4,5),c(5,6,7,8,9)) </code></pre>
<p>Agora podemos unir tanto em linhas como em colunas, usando a function do.call</p>
<ul>
<li>Unindo os itens da lista em um data frame, um embaixo do outro</li>
</ul>
<pre class="r"><code>do.call(&quot;rbind&quot;,list_union)</code></pre>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    2    3    4    5
## [2,]    5    6    7    8    9</code></pre>
<ul>
<li>Unindo os itens da lista em um data frame, um do lado do outro</li>
</ul>
<pre class="r"><code>do.call(&quot;cbind&quot;,list_union)</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1    5
## [2,]    2    6
## [3,]    3    7
## [4,]    4    8
## [5,]    5    9</code></pre>
<p>Podemos ainda unir em colunas, itens da lista cujos dataframes tem tamanhos diferentes de linha, observe</p>
<pre class="r"><code>reduce_merge = list(data.frame(Faixas = c(&quot;100 - 200&quot;,
                                          &quot;200 - 300&quot;,
                                          &quot;300 - 400&quot;,
                                          &quot;400 - 500&quot;,
                                          &quot;500 - 600&quot;,
                                          &quot;600 - 700&quot;,
                                          &quot;700 - 800&quot;,
                                          &quot;800 - 900&quot;,
                                          &quot;900 - 1000&quot;),
                               Score = c(&quot;0.002716428&quot;,
                                         &quot;0.020077950&quot;,
                                         &quot;0.134404157&quot;,
                                         &quot;0.307310736&quot;,
                                         &quot;0.287941420&quot;,
                                         &quot;0.164402976&quot;,
                                         &quot;0.061178694&quot;,
                                         &quot;0.017597732&quot;,
                                         &quot;0.003897484&quot;)),
                    data.frame(Faixas = c(&quot;0 - 100&quot;,
                                          &quot;100 - 200&quot;,
                                          &quot;200 - 300&quot;,
                                          &quot;300 - 400&quot;,
                                          &quot;400 - 500&quot;,
                                          &quot;500 - 600&quot;,
                                          &quot;600 - 700&quot;,
                                          &quot;700 - 800&quot;,
                                          &quot;800 - 900&quot;,
                                          &quot;900 - 1000&quot;),
                               Score2 = c(&quot;0.005478997&quot;,
                                          &quot;0.002716428&quot;,
                                          &quot;0.020077950&quot;,
                                          &quot;0.134404157&quot;,
                                          &quot;0.307310736&quot;,
                                          &quot;0.287941420&quot;,
                                          &quot;0.164402976&quot;,
                                          &quot;0.061178694&quot;,
                                          &quot;0.017597732&quot;,
                                          &quot;0.003897484&quot;)))</code></pre>
<ul>
<li>Usando a fun√ß√£o reduce com dataframes de tamanhos distintos, como se fosse um left join</li>
</ul>
<pre class="r"><code>Reduce(function(x,y) merge(x, y, all =T),
       reduce_merge)</code></pre>
<pre><code>##        Faixas       Score      Score2
## 1     0 - 100        &lt;NA&gt; 0.005478997
## 2   100 - 200 0.002716428 0.002716428
## 3   200 - 300 0.020077950 0.020077950
## 4   300 - 400 0.134404157 0.134404157
## 5   400 - 500 0.307310736 0.307310736
## 6   500 - 600 0.287941420 0.287941420
## 7   600 - 700 0.164402976 0.164402976
## 8   700 - 800 0.061178694 0.061178694
## 9   800 - 900 0.017597732 0.017597732
## 10 900 - 1000 0.003897484 0.003897484</code></pre>
<ul>
<li>Unindo diferentes listas atrav√©s da fun√ß√£o append</li>
</ul>
<p>Basta usarmos a fun√ß√£o <em>append</em> passando como argumentos nossa primeira e segunda lista.</p>
<pre class="r"><code>append(empty_list,reduce_merge)</code></pre>
<pre><code>## $matriz
##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10
## 
## $vetor
## [1] 1 2 3 4 5
## 
## [[3]]
##       Faixas       Score
## 1  100 - 200 0.002716428
## 2  200 - 300 0.020077950
## 3  300 - 400 0.134404157
## 4  400 - 500 0.307310736
## 5  500 - 600 0.287941420
## 6  600 - 700 0.164402976
## 7  700 - 800 0.061178694
## 8  800 - 900 0.017597732
## 9 900 - 1000 0.003897484
## 
## [[4]]
##        Faixas      Score2
## 1     0 - 100 0.005478997
## 2   100 - 200 0.002716428
## 3   200 - 300 0.020077950
## 4   300 - 400 0.134404157
## 5   400 - 500 0.307310736
## 6   500 - 600 0.287941420
## 7   600 - 700 0.164402976
## 8   700 - 800 0.061178694
## 9   800 - 900 0.017597732
## 10 900 - 1000 0.003897484</code></pre>
</div>
<div id="excluindo-itens-de-uma-lista" class="section level3">
<h3>9.4. Excluindo itens de uma lista</h3>
<p>Assim como em um dataframe, basta declararmos o valor null para o elemento da lista que queremos excluir, passando o nome do item da lista ou sua posi√ß√£o.</p>
<pre class="r"><code>reduce_merge[[2]] = NULL</code></pre>
</div>
<div id="inserindo-objetos-em-uma-lista" class="section level3">
<h3>9.5. Inserindo objetos em uma lista</h3>
<p>Se podemos excluir, tamb√©m podemos adicionar elementos a uma lista, nesse caso, basta chamarmos a lista colocando dentro do colchete o nome do novo item, ou a posi√ß√£o.</p>
<pre class="r"><code>reduce_merge[[&#39;newDataFrame&#39;]] = data.frame(Coluna1 = c(7,7,7,7,7))</code></pre>
<pre><code>##   Coluna1
## 1       7
## 2       7
## 3       7
## 4       7
## 5       7</code></pre>
<pre class="r"><code>reduce_merge[[4]] = c(1,2,3,4,5)</code></pre>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p><a href="#abcd">Volte ao topo</a></p>
</div>
</div>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-137568071-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

